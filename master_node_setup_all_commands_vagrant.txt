 1  lsb_release -a
    2  uname -r
    3  hostname
    4  lsb_release -a
    5  uname -r
    6  sudo apt update && sudo apt upgrade -y
    7  sudo swapoff -a
    8  free -h
    9  sudo modprobe overlay
   10  sudo modprobe br_netfilter
   11  cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
   12  overlay
   13  br_netfilter
   14  EOF
   15  cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf
   16  net.bridge.bridge-nf-call-iptables  = 1
   17  net.bridge.bridge-nf-call-ip6tables = 1
   18  net.ipv4.ip_forward                 = 1
   19  EOF
   20  sudo sysctl --system
   21  ls /proc/sys/net/bridge/
   22  setenforce 0
   23  apt install selinux-utils
   24  sudo apt install selinux-utils
   25  setenforce 0
   26  sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config
   27  export VERSION=1.26
   28  curl -L -o /etc/yum.repos.d/devel:kubic:libcontainers:stable.repo https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/CentOS_8/devel:kubic:libcontainers:stable.repo
   29  curl -L -o /etc/yum.repos.d/devel:kubic:libcontainers:stable:cri-o:$VERSION.repo https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable:cri-o:$VERSION/CentOS_8/devel:kubic:libcontainers:stable:cri-o:$VERSION.repo
   30  sudo apt install -y containerd
   31  sudo mkdir -p /etc/containerd
   32  sudo containerd config default | sudo tee /etc/containerd/config.toml
   33  sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml
   34  sudo systemctl restart containerd
   35  sudo systemctl enable containerd
   36  sudo systemctl status containerd
   37  containerd --version
   38  sudo apt-get install -y apt-transport-https ca-certificates curl gpg
   39  curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.29/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg
   40  echo "deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] \
   41  https://pkgs.k8s.io/core:/stable:/v1.29/deb/ /" | sudo tee /etc/apt/sources.list.d/kubernetes.list
   42  sudo apt update
   43  sudo apt install -y kubelet kubeadm kubectl
   44  sudo apt-mark hold kubelet kubeadm kubectl
   45  sudo systemctl enable kubelet
   46  sudo kubeadm init --pod-network-cidr=192.168.0.0/16
   47  exit
   48  history
   49  sudo kubeadm init --pod-network-cidr=192.168.0.0/16
   50  kubectl get node
   51  mkdir -p $HOME/.kube
   52  sudo cp /etc/kubernetes/admin.conf $HOME/.kube/config
   53  sudo chown $(id -u):$(id -g) $HOME/.kube/config
   54  kubectl get nodes
   55  kubectl get ns
   56  kubectl get pod -n kube-system
   57  kubectl describe pod coredns-76f75df574-hzbxs -n kube-system
   58  kubectl get pod -n kube-system
   59  kubectl taint nodes --all node-role.kubernetes.io/control-plane-
   60  kubectl get pod -n kube-system
   61  kubectl describe pod coredns-76f75df574-hzbxs -n kube-system
   62  kubectl get pod -n kube-system
   63  kubectl create deployment dep1 --image=vimal13/apache-webserver-php
   64  kubectl get all
   65  kubectl get po
   66  kubectl describe pod dep1-857854c859-rnhwh 
   67  kubectl taint nodes --all node-role.kubernetes.io/control-plane-
   68  cluster info
   69  kubectl get all
   70  kubectl get node
   71  kubectl get node -o wide
   72  kubectl taint nodes --all node-role.kubernetes.io/control-plane-
   73  kubectl get all
   74  kubectl get nodes
   75  kubectl apply -f https://raw.githubusercontent.com/projectcalico/calico/v3.27.0/manifests/calico.yaml
   76  watch kubectl get pods -n kube-system
   77  kubectl get pods -n kube-system
   78  kubectl get all
   79  history
